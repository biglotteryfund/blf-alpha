(function(){var f="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},g="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function h(){h=function(){};g.Symbol||(g.Symbol=k)}var l=0;function k(a){return"jscomp_symbol_"+(a||"")+l++}
function m(){h();var a=g.Symbol.iterator;a||(a=g.Symbol.iterator=g.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&f(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return n(this)}});m=function(){}}function n(a){var b=0;return q(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function q(a){m();a={next:a};a[g.Symbol.iterator]=function(){return this};return a}
function r(a){if(!(a instanceof Array)){m();var b=a[Symbol.iterator];a=b?b.call(a):n(a);for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function t(a,b){function c(){}c.prototype=b.prototype;a.H=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}var u=/:(80|443)$/,v=document.createElement("a"),w={};
function y(a){a=a&&"."!=a?a:location.href;if(w[a])return w[a];v.href=a;if("."==a.charAt(0)||"/"==a.charAt(0))return y(v.href);var b="80"==v.port||"443"==v.port?"":v.port,b="0"==b?"":b,c=v.host.replace(u,"");return w[a]={hash:v.hash,host:c,hostname:v.hostname,href:v.href,origin:v.origin?v.origin:v.protocol+"//"+c,pathname:"/"==v.pathname.charAt(0)?v.pathname:"/"+v.pathname,port:b,protocol:v.protocol,search:v.search}}var z=[];
function A(a,b){var c=this;this.context=a;this.m=b;this.f=(this.c=/Task$/.test(b))?a.get(b):a[b];this.a=[];this.b=[];this.h=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return c.b[c.b.length-1].apply(null,[].concat(r(b)))};this.c?a.set(b,this.h):a[b]=this.h}function B(a,b){b=a.a.indexOf(b);-1<b&&(a.a.splice(b,1),0<a.a.length?C(a):(b=z.indexOf(a),-1<b&&(z.splice(b,1),a.c?a.context.set(a.m,a.f):a.context[a.m]=a.f)))}
function C(a){a.b=[];for(var b,c=0;b=a.a[c];c++){var d=a.b[c-1]||a.f.bind(a.context);a.b.push(b(d))}}function D(a,b){var c=z.filter(function(c){return c.context==a&&c.m==b})[0];c||(c=new A(a,b),z.push(c));return c}function E(a,b,c,d){if("function"==typeof d){var e=c.get("buildHitTask");return{buildHitTask:function(c){c.set(a,null,!0);c.set(b,null,!0);d(c,void 0,void 0);e(c)}}}return F({},a,b)}
function G(a){var b;return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];clearTimeout(b);b=setTimeout(function(){return a.apply(null,[].concat(r(d)))},500)}}
var F=Object.assign||function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var d=0,e=c.length;d<e;d++){var x=Object(c[d]),p;for(p in x)Object.prototype.hasOwnProperty.call(x,p)&&(a[p]=x[p])}return a},H=function aa(b){return b?(b^16*Math.random()>>b/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,aa)};function I(){this.b={}}
I.prototype.s=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];(this.b[a]=this.b[a]||[]).forEach(function(a){return a.apply(null,[].concat(r(c)))})};var J={},K=!1,L;function M(a,b){b=void 0===b?{}:b;this.b={};this.a=a;this.i=b;this.g=null}t(M,I);function N(a,b,c){a=["autotrack",a,b].join(":");J[a]||(J[a]=new M(a,c),K||(window.addEventListener("storage",O),K=!0));return J[a]}
function P(){if(null!=L)return L;try{window.localStorage.setItem("autotrack","autotrack"),window.localStorage.removeItem("autotrack"),L=!0}catch(a){L=!1}return L}M.prototype.get=function(){if(this.g)return this.g;if(P())try{this.g=Q(window.localStorage.getItem(this.a))}catch(a){}return this.g=F({},this.i,this.g)};M.prototype.set=function(a){this.g=F({},this.i,this.g,a);if(P())try{var b=JSON.stringify(this.g);window.localStorage.setItem(this.a,b)}catch(c){}};
function R(a){a.g={};if(P())try{window.localStorage.removeItem(a.a)}catch(b){}}function O(a){var b=J[a.key];if(b){var c=F({},b.i,Q(a.oldValue));a=F({},b.i,Q(a.newValue));b.g=a;b.s("externalSet",a,c)}}function Q(a){var b={};if(a)try{b=JSON.parse(a)}catch(c){}return b}var S={};
function T(a,b,c){this.f=a;this.timeout=b||U;this.timeZone=c;b=this.b=this.b.bind(this);c=D(a,"sendHitTask");c.a.push(b);C(c);try{this.c=new Intl.DateTimeFormat("en-US",{timeZone:this.timeZone})}catch(d){}this.a=N(a.get("trackingId"),"session",{hitTime:0,isExpired:!1});this.a.get().id||this.a.set({id:H()})}
T.prototype.isExpired=function(a){a=void 0===a?this.a.get().id:a;if(a!=this.a.get().id)return!0;a=this.a.get();if(a.isExpired)return!0;var b=a.hitTime;return b&&(a=new Date,b=new Date(b),a-b>6E4*this.timeout||this.c&&this.c.format(a)!=this.c.format(b))?!0:!1};T.prototype.b=function(a){var b=this;return function(c){a(c);var d=c.get("sessionControl");c="start"==d||b.isExpired();var d="end"==d,e=b.a.get();e.hitTime=+new Date;c&&(e.isExpired=!1,e.id=H());d&&(e.isExpired=!0);b.a.set(e)}};
var U=30,V={u:1,v:2,w:3,A:4,B:5,C:6,D:7,F:8,G:9,o:10},W=Object.keys(V).length;
function X(a,b){var c=V.o;a.set("\x26_av","2.4.1");var d=a.get("\x26_au"),d=parseInt(d||"0",16).toString(2);if(d.length<W)for(var e=W-d.length;e;)d="0"+d,e--;c=W-c;d=d.substr(0,c)+1+d.substr(c+1);a.set("\x26_au",parseInt(d||"0",2).toString(16));window.addEventListener&&(this.b=F({increaseThreshold:20,sessionTimeout:U,fieldsObj:{}},b),this.f=a,this.c=Y(this),this.h=G(this.h.bind(this)),this.l=this.l.bind(this),this.a=N(a.get("trackingId"),"plugins/max-scroll-tracker"),b=this.b.sessionTimeout,c=this.b.timeZone,
d=a.get("trackingId"),this.j=S[d]?S[d]:S[d]=new T(a,b,c),b=this.l,a=D(a,"set"),a.a.push(b),C(a),Z(this))}function Z(a){100>(a.a.get()[a.c]||0)&&window.addEventListener("scroll",a.h)}
X.prototype.h=function(){var a=document.documentElement,b=document.body,a=Math.min(100,Math.max(0,Math.round(window.pageYOffset/(Math.max(a.offsetHeight,a.scrollHeight,b.offsetHeight,b.scrollHeight)-window.innerHeight)*100))),b=this.j.a.get().id;b!=this.a.get().sessionId&&(R(this.a),this.a.set({sessionId:b}));if(this.j.isExpired(this.a.get().sessionId))R(this.a);else if(b=this.a.get()[this.c]||0,a>b&&(100!=a&&100!=b||window.removeEventListener("scroll",this.h),b=a-b,100==a||b>=this.b.increaseThreshold)){var c=
{};this.a.set((c[this.c]=a,c.sessionId=this.j.a.get().id,c));a={transport:"beacon",eventCategory:"Max Scroll",eventAction:"increase",eventValue:b,eventLabel:String(a),nonInteraction:!0};this.b.maxScrollMetricIndex&&(a["metric"+this.b.maxScrollMetricIndex]=b);this.f.send("event",E(a,this.b.fieldsObj,this.f,this.b.hitFilter))}};X.prototype.l=function(a){var b=this;return function(c,d){a(c,d);var e={};("object"==typeof c&&null!==c?c:(e[c]=d,e)).page&&(c=b.c,b.c=Y(b),b.c!=c&&Z(b))}};
function Y(a){a=y(a.f.get("page")||a.f.get("location"));return a.pathname+a.search}X.prototype.remove=function(){var a=this.j,b=a.b;B(D(a.f,"sendHitTask"),b);delete J[a.a.a];Object.keys(J).length||(window.removeEventListener("storage",O),K=!1);delete S[a.f.get("trackingId")];window.removeEventListener("scroll",this.h);a=this.l;B(D(this.f,"set"),a)};
(function(a,b){var c=window.GoogleAnalyticsObject||"ga";window[c]=window[c]||function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];(window[c].q=window[c].q||[]).push(b)};window.gaDevIds=window.gaDevIds||[];0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo");window[c]("provide",a,b);window.gaplugins=window.gaplugins||{};window.gaplugins[a.charAt(0).toUpperCase()+a.slice(1)]=b})("maxScrollTracker",X);})();
//# sourceMappingURL=autotrack.js.map