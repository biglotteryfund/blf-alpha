{% extends "layouts/main.njk" %}
{% from "components/user-navigation/macro.njk" import userNavigation with context %}
{% from "components/user-status/macro.njk" import userStatus with context %}

{% macro resendButton() %}
    <form action="" method="POST">
        <input type="submit" class="btn" value="{{ copy.resendLabel }}" />
    </form>
{% endmacro %}

{% block content %}
    <main role="main" id="content">
        <div class="content-box u-inner-wide-only">

            {{ userNavigation(userNavigationLinks) }}
            {{ userStatus(user) }}

            <h1 class="t--underline">{{ title }}</h1>

            <div class="s-prose u-constrained-wide">
                {% if tokenError %}
                    <p>{{ copy.errorMessage }}</p>
                    <p>{{ resendButton() }}</p>
                {% else %}

                    {% if resendSuccessful %}
                        <div class="message" role="alert">
                            {{ copy.resendMessage | safe }}
                        </div>
                    {% endif %}

                    <p>{{ __(copy.introduction, user.userData.username) | safe }}</p>

                    <h2>{{ copy.notReceived.title }}</h2>
                    {{ __(copy.notReceived.body, localify('/user/update-email')) | safe }}
                    <p>{{ resendButton() }}</p>

                    <h2>{{ copy.contact.title }}</h2>
                    {{ copy.contact.body | safe }}
                {% endif %}
            </div>
        </div>
    </main>
{% endblock %}
