{% extends "layouts/main.njk" %}
{% from "components/latest-updates/macro.njk" import latestUpdates %}
{% from "components/miniature-hero/macro.njk" import miniatureHero %}
{% from "components/social.njk" import socialLinks with context %}

{% block content %}
    <main role="main">
        <h1 class="u-visually-hidden">{{ globalCopy.brand.title }}</h1>

        {# Hero introduction #}
        <section class="super-hero-next">
            <figure class="super-hero-next__image">
                <picture>
                    <source srcset="{{ heroImage.large }}" media="(min-width: 1040px)">
                    <source srcset="{{ heroImage.medium }}" media="(min-width: 600px)">
                    <source srcset="{{ heroImage.small }}">
                    <img src="{{ heroImage.default }}" alt="{{ heroImage.caption }}" />
                </picture>
                {% if heroImage.caption %}
                    <figcaption class="super-hero-next__caption u-caption">
                        {{ heroImage.caption }}
                    </figcaption>
                {% endif %}
            </figure>
            <div class="super-hero-next__content">
                <div class="super-hero-next__header u-inner" id="content">
                    <h2 class="super-hero-next__title">{{ copy.introNew.title | widont | safe }}</h2>
                    <div class="super-hero-next__intro">
                        {{ __(copy.introNew.description, 'https://www.national-lottery.co.uk/', localify('/data')) | safe }}
                    </div>

                    <div class="o-button-group">
                        <a class="btn btn--reversed btn--medium"
                            href="{{ localify('/funding/under10k') }}"
                            id="qa-button-under10k">
                            <span class="u-wide-only">{{ copy.under10k.long }}</span>
                            <span class="u-not-wide">{{ copy.under10k.short }}</span>
                        </a>
                        <a class="btn btn--reversed btn--medium"
                            href="{{ localify('/funding/over10k') }}"
                            id="qa-button-over10k">
                            <span class="u-wide-only">{{ copy.over10k.long }}</span>
                            <span class="u-not-wide">{{ copy.over10k.short }}</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>
        
        {# Featured sections #}
        <section class="u-inner u-margin-bottom">
            <ul class="flex-grid flex-grid--3up">
                {% for item in copy.featuredLinks %}
                    <li class="flex-grid__item">
                        {# @TODO: Fetch real image path #}
                        {{ miniatureHero({
                            "title": item.label,
                            "linkUrl": item.href,
                            "image": { "url": "https://biglotteryfund-assets.imgix.net/media/heroes/arkwright-meadows-small.jpg?auto=compress%2Cformat&crop=faces&fit=crop&h=333&w=500&s=7e87987873b15c0216f342d35af3138e" }
                        }) }}
                    </li>
                {% endfor %}
            </ul>
        </section>

        {# Latest News #}
        {% if promotedUpdates.result.length > 1 %}
            <section class="u-border-top u-inner u-padded u-margin-bottom">
                {{ latestUpdates(
                    articles = promotedUpdates.result,
                    title = __('global.misc.latestNews'),
                    allLink = {
                        "url": localify('/news'),
                        "label": __('global.misc.viewAllNews') 
                    }
                ) }}   
            </section>
        {% endif %}

        {# Social links #}
        <section class="u-inner u-margin-bottom-l">
            {{ socialLinks(isStacked = false) }}
        </section>
    </main>
{% endblock %}
