{% from "components/hero.njk" import hero with context %}
{% from "components/programmes.njk" import programmeList with context %}
{% from "components/breadcrumb-trail/macro.njk" import breadcrumbTrail %}
{% from "components/split-nav/macro.njk" import splitNav %}

{% extends "layouts/main.njk" %}

{% block content %}
    <main role="main">
        {{ hero(
            titleText = title,
            image = heroImage,
            accent = pageAccent
        ) }}

        <section class="content-box u-inner-wide-only accent--{{ pageAccent }} a--border-top nudge-up">
            {{ breadcrumbTrail(breadcrumbs) }}
            <h2 class="u-visually-hidden">{{ activeBreadcrumbsSummary }}</h2>

            {% if groupedProgrammes %}
                {% for region, regionProgrammes in groupedProgrammes %}
                    <h3>{{ region }}</h3>
                    {{ programmeList(regionProgrammes, accent = pageAccent) }}
                {% endfor %}
            {% elseif programmes.length > 0 %}
                {{ programmeList(programmes, accent = pageAccent) }}

                {{ splitNav(
                    prevLink = {
                        "label": "Previous page",
                        "url": pagination.prevLink
                    },
                    nextLink = {
                        "label": "Next page",
                        "url": pagination.nextLink
                    }
                ) }}

            {% else %}
                {# @TODO i18n #}
                <p>No results</p>
            {% endif %}
        </section>
    </main>
{% endblock %}
