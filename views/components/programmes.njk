{% macro fundingRange(minimum, maximum) %}
    £{{ minimum | numberWithCommas}}{% if maximum %} - £{{ maximum | numberWithCommas }}{% endif %}
{% endmacro %}

{% macro programmeCard(programme, path, accent) %}
    <article class="programme-card accent--{{ accent }} a--border-top a--border-color">
        <header class="programme-card__header">
            <h3 class="programme-card__title t1">
                <a class="u-link-minimal accent--{{ accent }} a--text" href="/{{ path }}">
                    {{ programme.title }}
                </a>
            </h3>
            {% if programme.photo %}
                <div class="programme-card__media">
                    <img src="{{ programme.photo }}" alt=""/>
                </div>
            {% endif %}
        </header>
        <div class="programme-card__body">
            {% if programme.description %}
                <div class="programme-card__description">
                    <p>{{ programme.description }}</p>
                </div>
            {% endif %}
            <dl class="programme-card__details">
                {% if programme.area %}
                    <dt>{{ __('global.programmes.programmeLabels.area') }}</dt>
                    <dd>{{ programme.area.label }}</dd>
                {% endif %}
                {% if programme.organisationTypes %}
                    <dt>{{ __('global.programmes.programmeLabels.organisationTypes') }}</dt>
                    <dd>{{ programme.organisationTypes | join(', ') }}</dd>
                {% endif %}
                {% if programme.fundingSize %}
                    <dt>{{ __('global.programmes.programmeLabels.fundingSize') }}</dt>
                    {% if programme.fundingSizeDescription %}
                        <dd>{{ programme.fundingSizeDescription }}</dd>
                    {% else %}
                        <dd>{{ fundingRange(
                            minimum = programme.fundingSize.minimum,
                            maximum = programme.fundingSize.maximum
                        ) }}</dd>
                    {% endif %}
                {% endif %}
                {% if programme.totalAvailable %}
                    <dt>{{ __('global.programmes.programmeLabels.totalAvailable') }}</dt>
                    <dd>{{ programme.totalAvailable }}</dd>
                {% endif %}
                {% if programme.applicationDeadline %}
                    <dt>{{ __('global.programmes.programmeLabels.applicationDeadline') }}</dt>
                    <dd>{{ programme.applicationDeadline }}</dd>
                {% endif %}
            </dl>
        </div>
    </article>
{% endmacro %}

{% macro programmeList(programmes, accent, labels) %}
    <div class="programmes-list">
        {% for programme in programmes %}
            <div class="programmes-list__item">
                {{ programmeCard(
                    path = programme.path,
                    programme = programme.content,
                    accent = accent
                ) }}
            </div>
        {% endfor %}
    </div>
{% endmacro %}

{% macro selectionTrail(trail, itemCount) %}
    {% if trail | length > 0 %}
    <ol class="selection-trail">
        {% for crumb in trail %}
        <li class="selection-trail__item">
            {% set showUrl = crumb.url  %}
            {% if showUrl %}<a class="selection-trail__link" href="{{ crumb.url }}">{% endif %}
            {{ crumb.label }}
            {% if loop.last and itemCount %}({{ itemCount }}){% endif %}
            {% if showUrl %}</a>{% endif %}
        </li>
        {% endfor %}
    </ol>
    {% endif %}
{% endmacro %}
