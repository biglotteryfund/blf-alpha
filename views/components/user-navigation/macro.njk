{% macro userNavigation(links = false, isFooter = false) %}
    <div class="user-nav{% if isFooter %} user-nav--footer{% endif %}">

        <div class="user-nav__primary">
            {% if (not nextPage or not previousPage) and user %}
                <p class="user-nav__text">
                    Logged in as <strong>{{ user.userData.username }}</strong>
                </p>
            {% else %}
                <ul class="user-nav__pagination">
                    {% if previousPage %}
                        <li class="user-nav__pagination-link user-nav__pagination-link--prev">
                            <span class="user-nav__pagination-arrow">←</span>
                            <a href="{{ previousPage.url }}">
                                Previous
                                <span class="user-nav__pagination-subtitle">
                                    {{ previousPage.label }}
                                </span>
                            </a>
                        </li>
                    {% endif %}
                    {% if nextPage %}
                        <li class="user-nav__pagination-link user-nav__pagination-link--next">
                            <a href="{{ nextPage.url }}">
                                Next
                                <span class="user-nav__pagination-subtitle">
                                    {{ nextPage.label }}
                                </span>
                            </a>
                            <span class="user-nav__pagination-arrow">→</span>
                        </li>
                    {% endif %}
                </ul>
            {% endif %}
        </div>

        <div class="user-nav__secondary">
            <ul class="user-nav__links">
                {% macro makeLinks(links) %}
                    {% for link in links %}
                        {% set currentPath = getCurrentUrl() | stripTrailingSlashes | removeQuery %}
                        {% set linkUrl = link.url | stripTrailingSlashes %}
                        {% set shouldLink = linkUrl !== currentPath %}
                        <li>
                            {% if shouldLink %}<a href="{{ link.url }}">{% endif %}
                            {{ link.label }}
                            {% if shouldLink %}</a>{% endif %}
                        </li>
                    {% endfor %}
                {% endmacro %}

                {% if links %}
                    {{ makeLinks(links) }}
                {% endif %}

                {{ makeLinks([{
                    "url": localify("/user"),
                    "label": "Account"
                }, {
                    "url": localify("/user/logout"),
                    "label": "Log out"
                }]) }}
            </ul>
        </div>
    </div>
{% endmacro %}
