{% from "components/overlay-text/macro.njk" import overlayText %}

{#
Promo card

props: {Object}
- kicker {String} - Kicker / tag overlaid on the image
- title {String} - Title
- subtitle {String} - Subtitle
- trailText {Html} - Trail text HTML
- image {Object} { url: {String}, alt: {String} }
- link {Object} { url: {String}, label: {String} }
accent: {String} - Accent colour to use
featured: {Boolean} - Use featured style for promo card
showBorder: {Boolean} - Show a border above this card
#}
{% macro promoCard(props, accent = 'pink', featured = false, showBorder = false) %}
    <div class="promo-card{% if featured %} promo-card--featured{% endif %}{% if showBorder %} u-accent-border-top-{{ accent }}{% endif %}">
        {% if props.image.url %}
            <div class="promo-card__media">
                {% if props.link.url %}<a href="{{ props.link.url }}">{% endif %}
                <img src="{{ props.image.url }}" alt="{{ props.image.alt }}"/>
                {% if props.link.url %}</a>{% endif %}
                {% if props.kicker %}
                    <span class="promo-card__kicker">
                        {% call overlayText(accent) %}
                            {{ props.kicker }}
                        {% endcall %}
                    </span>
                {% endif %}
            </div>
        {% endif %}
        <div class="promo-card__body">
            {% if props.kicker and not props.image.url %}
                <p class="promo-card__kicker">
                    {% call overlayText(accent) %}
                        {{ props.kicker }}
                    {% endcall %}
                </p>
            {% endif %}
            <h3 class="promo-card__title t4">
                {% if props.link.url %}<a class="u-link-minimal" href="{{ props.link.url }}">{% endif %}
                {{ props.title }}
                {% if props.link.url %}</a>{% endif %}
            </h3>
            {% if props.subtitle %}
                <p class="promo-card__subtitle">{{ props.subtitle }}</p>
            {% endif %}
            <div class="promo-card__trail-text s-prose">
                {% if props.trailText %}
                    {{ props.trailText | safe }}
                {% endif %}
                {% if props.link.url and props.link.label %}
                    <a href="{{ props.link.url }}"{% if props.link.labelAria %} aria-label="{{ props.link.labelAria }}"{% endif %}>
                        {{ props.link.label }}
                    </a>
                {% endif %}
            </div>
        </div>
        {# Allow for custom meta content using https://mozilla.github.io/nunjucks/templating.html#call #}
        {% if caller %}
            <div class="promo-card__meta">
                {{ caller() }}
            </div>
        {% endif %}
    </div>
{% endmacro %}
