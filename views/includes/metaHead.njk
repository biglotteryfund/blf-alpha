<link rel="stylesheet" type="text/css" href="{{ 'stylesheets/style-rebrand.css' | getCachebustedPath }}">
<link rel="stylesheet" href="https://use.typekit.net/yyc1dgh.css">

<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=HTMLPictureElement,Promise,Array.prototype.find,Element.prototype.closest"></script>
<script id="script-config">

(function() {
    var AppConfig = {
        environment: '{{ appData.environment }}',
        isNotProduction: {{ appData.isNotProduction }},
        locale: '{{ locale }}',
        localePrefix: '{{ localePrefix }}',
        isModernBrowser:
            'querySelector' in document &&
            'addEventListener' in window &&
            'localStorage' in window &&
            'bind' in Function,
        isOldIE:
            navigator.userAgent.indexOf('MSIE') !== -1 ||
            navigator.appVersion.indexOf('Trident/') > 0,
        hasSeenPageBefore: (function() {
            var hasSeenPageBefore = false;
            try {
                hasSeenPageBefore = !!window.sessionStorage.getItem(
                    'app.hasSeenPageBefore'
                );
            } catch (e) {} // eslint-disable-line no-empty

            if (!hasSeenPageBefore) {
                try {
                    window.sessionStorage.setItem(
                        'app.hasSeenPageBefore',
                        true
                    );
                } catch (e) {} // eslint-disable-line no-empty
            }

            return hasSeenPageBefore;
        })(),
        /**
         * Allows us to disable google analytics on live env when loaded via EC2/ELB
         * and not the real domain e.g. to avoid polluting data with extra domains
         */
        blockAnalytics:
            {{ appData.environment == 'production' }} &&
            ['www.biglotteryfund.org.uk', 'www.tnlcommunityfund.org.uk'].indexOf(window.location.hostname) === -1
    };

    window.AppConfig = AppConfig;
})();
</script>
<script id="script-head">
    {% include "includes/head.js" %}
</script>
