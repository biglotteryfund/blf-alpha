{% from "components/nav.njk" import splitNav with context %}

{% extends "layouts/main.njk" %}

{% set bodyClass = 'has-static-header' %}
{% set pageAccent = 'cyan' %}

{% block content %}
    <main role="main">
        <div class="content-box inner--wide-only accent--{{ pageAccent }} a--border-top">
            <h1>Search past grants</h1>

            <form method="get">
                <div class="form-field">
                    <label class="ff-label" for="field-q">Search</label>
                    <input class="ff-text" type="search" name="q" id="field-q" value="{{ queryParams.q }}" />
                </div>

                <div class="form-actions o-button-group">
                    <input type="submit" value="Filter" class="btn btn--medium">
                </div>
            </form>

            <section>
                <h2>
                    Showing <em>{{ meta.totalResults }}</em> results
                    {% if queryParams.q %}for "{{ queryParams.q }}"{% endif %}
                </h2>
                {% for grant in grants %}
                    <article class="s-prose">
                        <h3 class="t2">{{ grant.recipientName }}</h3>
                        <p>{{ grant.title }}</p>
                        <p><small>{{ grant.description }}</small></p>
                        <dl class="o-definition-list o-definition-list--compact">
                            <dt>Amount awarded</dt>
                            <dd>Â£{{ grant.amountAwarded }}</dd>
                            <dt>Grant programme</dt>
                            <dd>{{ grant.grantProgrammeTitle }}</dd>
                        </dl>
                        <hr />
                    </article>
                {% endfor %}

                {{ splitNav(pagination) }}
            </section>
        </div>
    </main>
{% endblock %}
