{% from "components/hero.njk" import sectionHero %}
{% from "components/data.njk" import statsGrid %}

{% extends "../../layouts/main.njk" %}

{% block title %}{{ copy.title | striptags(true) }} | {% endblock %}

{% set bodyClass = "has-full-bleed-header" %}
{% set heroImage = heroImages.data %}
{% set socialImage = heroImage %}

{% block content %}

    {% set pageAccent = 'blue' %}

    {{
        sectionHero(
            titleText = title,
            image = heroImage,
            accent = pageAccent
        )
    }}

    <article role="main" class="nudge-up">
        <div class="inner accent--pink a--border-top stats-holder content-box content-box--borderless">
            <h3 class="t2 t--underline accent--pink">{{ copy.keyStats }}</h3>
            {{ statsGrid(copy.data) }}
        </div>
    </article>


    <aside class="accent--{{ pageAccent }} a--border-top map-holder">
        <div class="inner--wide-only expanded map-holder__inner content-box content-box--frameless no-space">
            <h3 class="t2 t--underline accent--{{ pageAccent }}">{{ copy.map.title }}</h3>

            <div class="map-wrapper">
                {% include "../../includes/uk-svg.njk" %}
            </div>

            <div id="js-map-panes" class="js-paneset">
                {% for region in grants %}
                    <section id="region-{{ region.id }}" class="tab__pane{% if loop.first %} pane--active{% endif %}">
                        <article class="map-info accent--{{ pageAccent }} a--border-top padded region--{{ region.id }}--b-t">
                            <h4 class="t2 t--underline region--{{ region.id }}--b-b">{{ copy.regions[region.id] }}</h4>

                            <h5 class="map-info__stat t2 accent--{{ pageAccent }} a--text">{{ region.population | numberWithCommas }}</h5>
                            <h6 class="t8"><strong>{{ copy.map.population }}</strong></h6>

                            <h5 class="map-info__stat t2 accent--{{ pageAccent }} a--text">{{ region.totalAwarded }}</h5>
                            <h6 class="t8"><strong>{{ copy.map.totalAwarded }}</strong></h6>

                            <h5 class="map-info__stat t2 accent--{{ pageAccent }} a--text">{{ region.beneficiaries | numberWithCommas }}</h5>
                            <h6 class="t8"><strong>{{ copy.map.totalBeneficiaries }}</strong></h6>
                        </article>
                    </section>
                {% endfor %}
            </div>

        </div>
    </aside>

{% endblock %}
