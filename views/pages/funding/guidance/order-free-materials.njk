{% import "components/hero.njk" as hero %}
{% import "components/headers.njk" as headers %}
{% import "components/forms.njk" as forms %}

{% extends "layouts/main.njk" %}

{% block title %}{{ title }} | {% endblock %}

{% block content %}

    {% set heroContent %}
        <div class="nudge-bottom">
            {{ headers.blockheader('h2', title, 30, 'hero__header') }}
        </div>
    {% endset %}

    {{ hero.header('logo', heroContent, 'blue') }}

    <article role="main" class="nudge-up">
        <div class="inner--wide-only p">

            <ul class="grid grid--wide-only grid--equal grid--3-up grid--padded">
                {% for item in materials %}
                    <li class="grid__item">
                        <div class="grid__item__inner accent--blue accent-b-t-l bordered p material-item">
                            {% set imgPath = 'images/materials/' + locale + '/' + item.image %}
                            <div class="material-item__media m-b"
                                 style="background-image: url({{ imgPath | getCachebustedPath }}">
                            </div>
                            <h4>{{ item.name }}</h4>
                            {% if item.dimensions %}
                                <p>({{ item.dimensions[0] }}mm x {{ item.dimensions[1] }}mm)</p>
                            {% endif %}

                            {% for p in item.products %}
                                <form class="material-item__controls"
                                      method="post"
                                      action="/funding/funding-guidance/managing-your-funding/ordering-free-materials/item/{{ item.id }}">
                                    <input type="hidden" name="code" value="{{ p.code }}">
                                    <label>{% if p.name %}{{ p.name }} {% endif %}{{ item.name }} in {{ p.language }}</label>
                                    <button type="submit"
                                            value="decrease"
                                            name="action"
                                            class="btn btn--cta m-t-none material-item__btn material-item__btn--decrease js-order-material-btn">
                                        -
                                    </button>
                                    <input type="text"
                                           value="{{ orders[p.code].quantity or 0}}"
                                           class="material-item__quantity js-material-count">
                                    <button type="submit"
                                            value="increase"
                                            name="action"
                                            class="btn btn--cta m-t-none material-item__btn material-item__btn--increase js-order-material-btn">
                                        +
                                    </button>
                                </form>
                            {% endfor %}

                        </div>
                    </li>
                {% endfor %}
            </ul>

            <h2>Order form</h2>

            {{ orderedIds }}

            <form class="form-fund" method="post">
                {{ forms.input('yourName', 'Your name') }}
                {{ forms.input('yourAddress', 'Your address', inputType = 'textarea') }}
                {{ forms.input('yourNumber', 'Your telephone number', inputType = 'tel') }}
                {{ forms.input('yourEmail', 'Your email address', inputType = 'email') }}
                {{ forms.input('yourProjectName', 'Your project name') }}
                {{ forms.input('yourProjectID', 'Your project ID number') }}
                {{ forms.input('yourGrantAmount', 'Your grant amount') }}
                <input type="submit">
            </form>



        </div>
    </article>

{% endblock %}