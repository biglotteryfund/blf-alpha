{% import "components/hero.njk" as hero %}
{% import "components/headers.njk" as headers %}

{% extends "layouts/main.njk" %}

{% block title %}{{ title }} | {% endblock %}

{% set howToUseLogo %}
    {% if locale == 'en' %}
        {% set logoExamplePath = 'images/logos/examples.png' %}
    {% else %}
        {% set logoExamplePath = 'images/logos/examples-cy.png' %}
    {% endif %}
    <h3 class="t3a tab-fallback-title">{{ copy.howToUseLogo.title }}</h3>
    <h3 class="t3a">{{ copy.howToUseLogo.sections.freeKit.title | safe }}</h3>
    <p>{{ copy.howToUseLogo.sections.freeKit.body | safe}}</p>

    <h3 class="t3a">{{ copy.howToUseLogo.sections.brandGuidance.title | safe }}</h3>
    <p>{{ copy.howToUseLogo.sections.brandGuidance.body | safe }}</p>

    <h3 class="t3a">{{ copy.howToUseLogo.sections.format.title | safe }}</h3>
    <p>{{ copy.howToUseLogo.sections.format.body | safe }}</p>

    <h3 class="t3a">{{ copy.howToUseLogo.sections.options.title | safe }}</h3>
    <p>{{ copy.howToUseLogo.sections.options.body | safe }}</p>

    <div class="central-gap">
        <img src="{{ logoExamplePath | getCachebustedPath }}"
             alt="Examples of our logo"
             class="width-natural" />
    </div>
{% endset %}

{% macro logoTabBar(paneId, logoTitle, localeId) %}
    <ul class="js-tabs tabs unstyled" data-panes="{{ paneId }}">
        <li class="js-tab-item"><a href="#logos-{{ localeId }}">{{ logoTitle }}</a></li>
        <li class="js-tab-item"><a href="#howto-{{ localeId }}">{{ copy.howToUseLogo.title }}</a></li>
    </ul>
{% endmacro %}

{% macro makeLogoTitle(logoName, logoSize) %}
    {{ copy.downloads.download }}
    {% if locale == 'cy' %}logo{% endif %}
    {{ copy.downloads.colours[logoName] }}
    {% if locale == 'en' %}logo{% endif %}
    <span class="lighter">({{ copy.downloads.sizes[logoSize] }})</span>
{% endmacro %}

{% macro successMessage(type) %}
    {% if copy.successMessages[type] %}
        <div class="hidden js-success js-success--{{ type }}">
            <h3>{{ copy.successMessages.success }}</h3>
            <h4 class="t4">{{ copy.successMessages[type].title }}</h4>
            <h4 class="t6">{{ copy.successMessages[type].body }}</h4>
        </div>
    {% endif %}
{% endmacro %}

{% macro downloadBlock(logoId) %}
    <div class="grid__item__overlay" id="js-download-block--{{ logoId }}">
        <div class="overlay__close js-success--close" data-logo-id="{{ logoId }}">
            {% include "../../../includes/svg/close.svg" %}
        </div>
        {{ successMessage('digital') }}
        {{ successMessage('print') }}
        {{ successMessage('vector') }}
    </div>
{% endmacro %}

{% macro logoBlock(logoId, logoFilename, logoName, logoLocale = 'en', onlyEps = false, accent = false) %}
    {{ downloadBlock(logoId) }}
    {% set logoPreview = 'images/logos/' + logoLocale + '/' + logoFilename + '.png' %}
    {% set accentClass = '' %}
    {% if accent %}
        {% set accentClass = ' accent--' + accent + ' a--btn ' %}
    {% endif %}

    {% if not onlyEps %}<a href="/assets/logos/{{ logoLocale }}/{{ logoFilename }}-large.jpg" target="_blank" class="js-logo-trigger" data-logo-type="print" data-logo-id="{{ logoId }}">{% endif %}
        <img src="{{ logoPreview | getCachebustedPath }}" alt="The Big Lottery Fund logo, in {% if logoLocale == 'en' %}English{% else %}Welsh and English{% endif %}, coloured {{ logoName }}">
    {% if not onlyEps %}</a>{% endif %}
    {% if not onlyEps %}
        <a href="/assets/logos/{{ logoLocale }}/{{ logoFilename }}-small.jpg" class="{{ accentClass }}spaced--s btn btn--block btn--small js-logo-trigger" target="_blank" data-logo-type="digital" data-logo-id="{{ logoId }}">
            {{ makeLogoTitle(logoName, 'small') }}
        </a>
        <a href="/assets/logos/{{ logoLocale }}/{{ logoFilename }}-large.jpg" class="{{ accentClass }}spaced--s btn btn--block btn--small js-logo-trigger" target="_blank" data-logo-type="print" data-logo-id="{{ logoId }}">
            {{ makeLogoTitle(logoName, 'large') }}
        </a>
    {% endif %}
    <a href="/assets/logos/{{ logoLocale }}/{{ logoFilename }}.eps" class="{{ accentClass }}spaced--s btn btn--block btn--small js-logo-trigger" target="_blank" data-logo-type="vector" data-logo-id="{{ logoId }}">
        {{ makeLogoTitle(logoName, 'eps') }}
    </a>
{% endmacro %}

{% block content %}

    {% set heroContent %}
        {{ headers.overlayText('h2', copy.heroText, 't1') }}
    {% endset %}

    {{ hero.header('logo', heroContent, 'blue') }}

    <article role="main" class="nudge-up">

        <div class="inner--wide-only accent--blue a--border-top content-box">

            <h3 class="t3a">{{ copy.subtitle }}</h3>
            <p>{{ copy.body | safe }}</p>
            <p><strong>{{ copy.locationPrompt }}</strong></p>

            <div>
                <ul class="js-tabs unstyled grid grid--padded grid--equal grid--2-up grid--wide-only"
                    data-panes="js-logo-panes"
                    data-no-initial-selection="true">
                    <li class="js-tab-item grid__item">
                        <a href="#js-logo-panes-en" class="btn btn--block btn--small accent--blue a--btn">{{ copy.locations.monolingual }}</a>
                    </li>
                    <li class="js-tab-item grid__item">
                        <a href="#js-logo-panes-cy" class="btn btn--block btn--small accent--blue a--btn">{{ copy.locations.bilingual }}</a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="inner" id="js-logo-panes">

            {# england, scotland and NI #}
            <div class="js-pane tab-pane">

                {{ logoTabBar('js-logo-panes-en', copy.logoDownloads.monolingual, 'en') }}

                <div id="js-logo-panes-en">
                    {# logo pane #}
                    <div class="js-pane tab-pane bordered padded" id="logos-en">
                        <h3 class="t3a tab-fallback-title">{{ copy.logoDownloads.monolingual }}</h3>

                        <ul class="unstyled grid grid--wide-only grid--equal grid--2-up grid--padded">
                            <li class="grid__item">
                                <div class="grid__item__inner accent--turquoise bordered padded">
                                    {{ logoBlock(1, 'blue', 'blue', 'en', accent = 'turquoise') }}
                                </div>
                            </li>
                            <li class="grid__item">
                                <div class="grid__item__inner accent--pink bordered padded">
                                    {{ logoBlock(2, 'pink', 'pink', accent = 'pink') }}
                                </div>
                            </li>
                            <li class="grid__item">
                                <div class="grid__item__inner bordered padded bg--dark">
                                    {{ logoBlock(3, 'pink-white', 'white', onlyEps = true, accent = 'white') }}
                                </div>
                            </li>
                            <li class="grid__item">
                                <div class="grid__item__inner bordered padded bg--dark">
                                    {{ logoBlock(4, 'blue-white', 'white', onlyEps = true, accent = 'white') }}
                                </div>
                            </li>
                        </ul>
                    </div>

                    {# how to #}
                    <div class="js-pane tab-pane bordered padded" id="howto-en">
                        {{ howToUseLogo | safe }}
                    </div>
                </div>

            </div>

            {# wales #}
            <div class="js-pane tab-pane">

                {{ logoTabBar('js-logo-panes-cy', copy.logoDownloads.bilingual, 'cy') }}

                <div id="js-logo-panes-cy">
                    {# logo pane #}
                    <div class="js-pane tab-pane bordered padded" id="logos-cy">
                        <h3 class="t3a tab-fallback-title">{{ copy.logoDownloads.bilingual }}</h3>

                        <ul class="unstyled grid grid--wide-only grid--equal grid--2-up grid--padded">
                            <li class="grid__item">
                                <div class="grid__item__inner accent--turquoise bordered padded">
                                    {{ logoBlock(5, 'blue', 'blue', logoLocale = 'bilingual', accent = 'turquoise') }}
                                </div>
                            </li>
                            <li class="grid__item">
                                <div class="grid__item__inner accent--pink bordered padded">
                                    {{ logoBlock(6, 'pink', 'pink', logoLocale = 'bilingual', accent = 'pink') }}
                                </div>
                            </li>
                            <li class="grid__item">
                                <div class="grid__item__inner bordered padded bg--dark">
                                    {{ logoBlock(7, 'pink-white', 'white', logoLocale = 'bilingual', onlyEps = true, accent = 'white') }}
                                </div>
                            </li>
                            <li class="grid__item">
                                <div class="grid__item__inner bordered padded bg--dark">
                                    {{ logoBlock(8, 'blue-white', 'white', logoLocale = 'bilingual', onlyEps = true, accent = 'white') }}
                                </div>
                            </li>
                        </ul>
                    </div>

                    {# how to #}
                    <div class="js-pane tab-pane bordered padded" id="howto-cy">
                        {{ howToUseLogo | safe }}
                    </div>
                </div>

            </div>

        </div>

    </article>

{% endblock %}