{% extends "../layouts/tools.njk" %}
{% from "./user-helpers.njk" import listErrors with context %}

{% block title %}Reset password{% endblock %}

{% block content %}

    {{ listErrors() }}

    {% if mode === 'enterEmail' %}
        <form action="{{ makeUserLink('requestpasswordreset') }}" method="post">
            <div class="form-group">
                <label for="username">Email address</label>
                <input type="email"
                       class="form-control"
                       id="username"
                       placeholder="Your email address"
                       name="username"
                       required
                       aria-required="true"
                       value="{{ getFlash(request, 'formValues', 'username') }}">
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Request password reset" />
            </div>
        </form>
    {% elseif mode === 'pickNewPassword' %}
        <form action="{{ makeUserLink('resetpassword') }}" method="post">
            <input type="hidden" name="token" value="{{ token }}">
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password"
                       class="form-control"
                       id="password"
                       placeholder="Your new password"
                       name="password"
                       required
                       aria-required="true">
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Reset password" />
            </div>
        </form>
    {% endif %}

{% endblock %}
