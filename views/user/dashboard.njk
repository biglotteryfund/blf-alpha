{% extends "../layouts/tools.njk" %}
{% from "./user-helpers.njk" import listFormErrors, listGenericErrors with context %}

{% block title %}Your account{% endblock %}

{% block content %}

    {{ listGenericErrors() }}
    {{ listFormErrors() }}

    {% set activationInvalid = getFlash(request, 'activationInvalid') %}
    {% if activationInvalid %}
        <div class="alert alert-danger" role="alert">
            <p><strong>Error:</strong> That activation link is no longer valid &ndash; would you like to <a href="{{ makeUserLink('activate') }}">re-send your activation link</a>?</p>
        </div>
    {% endif %}

    {% if not user.is_active %}
        {% set activationSent = getFlash(request, 'activationSent') %}
        <div class="alert alert-warning" role="alert">
            <p><strong>Warning:</strong> You haven't activated your account yet!</p>
            {% if activationSent %}
                <p>We just sent an email to {{ user.username }} with a link to activate your account.</p>
            {% endif %}
            <p>Would you like to <a href="{{ makeUserLink('activate') }}">re-send your activation link</a>?</p>
        </div>
    {% endif %}

    <h1>Dashboard</h1>
    <h3>Logged in as <strong>{{ user.username }}</strong>.</h3>

{% endblock %}
