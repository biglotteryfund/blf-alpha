#!/bin/sh

# fix path (for git apps)
PATH=$PATH:/usr/local/bin:/usr/local/sbin

# to skip the tests, run with the --no-verify argument
# i.e. - $ 'git commit --no-verify'

JS_SRC_PATTERN="\.js$"
git diff --cached --name-only | if grep "$JS_SRC_PATTERN"
then
    npm run test-precommit
fi

# store the last exit code in a variable
RESULT=$?

# return the exit code
exit $RESULT